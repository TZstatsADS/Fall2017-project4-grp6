---
title: "Prediction & Evaluation for the Dataset 1"
author: "Saaya Yasuda"
output: html_notebook
---

```{r setup,include=FALSE}
knitr::opts_knit$set(root.dir = '~/Documents/GitHub/fall2017-project4-fall2017-proj4-grp6')
```

Note:
Note: When you pull the csv files in the output folder, please use "git lfs pull." 
The files bigger than 100mb are uploaded using [git large file storage](https://git-lfs.github.com/).

Load dataset
```{r}
#rm(list=ls())
test1 <- read.csv("./output/dataset1_test.csv",header=T)
rownames(test1) = test1[,1]
test1 = test1[,-1]

train1 <- read.csv("./output/dataset1_train.csv",header=T)
rownames(train1) = train1[,1]
train1 = train1[,-1]
```

Load source
```{r}
source('./lib/evaluation_ranked_scoring.r')
source('./lib/z_score.R')
```

Prediction

Load correlation matrices for prediction.

Similarity weight - Spearman & no variance & SN thresh
```{r}
SIM_Spearman_mat <- read.csv("./output/spearman_train1.csv",header=T)
neighbor_SIM_Spearman_mat <- read.csv("./output/neighbor_thresh_spearman.csv",header=T)

rownames(SIM_Spearman_mat) = SIM_Spearman_mat[,1]
SIM_Spearman_mat = SIM_Spearman_mat[,-1]
rownames(neighbor_SIM_Spearman_mat) = neighbor_SIM_Spearman_mat[,1]
neighbor_SIM_Spearman_mat = neighbor_SIM_Spearman_mat[,-1]

PRED_SIM_Spearman = z_score(train1, w=SIM_Spearman_mat, neighbor_matrix= neighbor_SIM_Spearman_mat)

file_name="./output/PRED_SIM_Spearman.csv"
write.csv(PRED_SIM_Spearman,file=file_name)

SCORE_SIM_Spearman= randked_scoring(PRED_SIM_Spearman,test1)
SCORE_SIM_Spearman
```

Similarity weight - Spearman & variance weighting & SN thresh
```{r}
SIM_Spearman_mat_vw <- read.csv("./output/spearman_vm_train1.csv",header=T)
neighbor_SIM_Spearman_mat_vw <- read.csv("./output/neighbor_thresh_spearman_wv.csv",header=T)

rownames(SIM_Spearman_mat_vw) = SIM_Spearman_mat_vw[,1]
SIM_Spearman_mat_vw = SIM_Spearman_mat_vw[,-1]
rownames(neighbor_SIM_Spearman_mat_vw) = neighbor_SIM_Spearman_mat_vw[,1]
neighbor_SIM_Spearman_mat_vw = neighbor_SIM_Spearman_mat_vw[,-1]

PRED_SIM_Spearman_vw = z_score(train1, w=SIM_Spearman_mat_vw, neighbor_matrix= neighbor_SIM_Spearman_mat_vw)

file_name="./output/PRED_SIM_Spearman_vw.csv"
write.csv(PRED_SIM_Spearman_vw,file=file_name)

SCORE_SIM_Spearman_vw= randked_scoring(PRED_SIM_Spearman_vw,test1)
SCORE_SIM_Spearman_vw

```

Similarity weight - Vec Sim  & no variance weighting & SN thresh
```{r}
SIM_vec_similarity_mat <- read.csv("./output/vectorsimilarity_train1.csv",header=T)
neighbor_SIM_vec_similarity_mat <- read.csv("./output/neighbor_thresh_vecsim.csv",header=T)

rownames(SIM_vec_similarity_mat) = SIM_vec_similarity_mat[,1]
SIM_vec_similarity_mat = SIM_vec_similarity_mat[,-1]
rownames(neighbor_SIM_vec_similarity_mat) = neighbor_SIM_vec_similarity_mat[,1]
neighbor_SIM_vec_similarity_mat = neighbor_SIM_vec_similarity_mat[,-1]

PRED_SIM_vec_similarity_mat = z_score(train1, w=SIM_vec_similarity_mat, neighbor_matrix= neighbor_SIM_vec_similarity_mat)

file_name="./output/PRED_SIM_vec_similarity_mat.csv"
write.csv(PRED_SIM_vec_similarity_mat,file=file_name)

SCORE_SIM_vec_similarity_mat= randked_scoring(PRED_SIM_vec_similarity_mat,test1)
SCORE_SIM_vec_similarity_mat

```

Similarity weight - Vec Sim  & variance weighting & SN thresh
```{r}
SIM_vec_similarity_mat_vw <- read.csv("./output/vectorsimilarity_vm_train1.csv",header=T)
neighbor_SIM_vec_similarity_mat_vw <- read.csv("./output/neighbor_thresh_vecsim_vm.csv",header=T)

rownames(SIM_vec_similarity_mat_vw) = SIM_vec_similarity_mat_vw[,1]
SIM_vec_similarity_mat_vw = SIM_vec_similarity_mat_vw[,-1]
rownames(neighbor_SIM_vec_similarity_mat_vw) = neighbor_SIM_vec_similarity_mat_vw[,1]
neighbor_SIM_vec_similarity_mat_vw = neighbor_SIM_vec_similarity_mat_vw[,-1]

PRED_SIM_vec_similarity_mat_vw = z_score(train1, w=SIM_vec_similarity_mat_vw, neighbor_matrix= neighbor_SIM_vec_similarity_mat_vw)

file_name="./output/PRED_SIM_vec_similarity_mat_vw.csv"
write.csv(PRED_SIM_vec_similarity_mat_vw,file=file_name)

SCORE_SIM_vec_similarity_mat_vw= randked_scoring(PRED_SIM_vec_similarity_mat_vw,test1)
SCORE_SIM_vec_similarity_mat_vw

```

Similarity weight - Spearman & no variance & SN BNN
```{r}
SIM_Spearman_mat <- read.csv("./output/spearman_train1.csv",header=T)
neighbor_SIM_Spearman_mat <- read.csv("./output/neighbor_bnn_spearman.csv",header=T)

rownames(SIM_Spearman_mat) = SIM_Spearman_mat[,1]
SIM_Spearman_mat = SIM_Spearman_mat[,-1]
rownames(neighbor_SIM_Spearman_mat) = neighbor_SIM_Spearman_mat[,1]
neighbor_SIM_Spearman_mat = neighbor_SIM_Spearman_mat[,-1]

PRED_SIM_Spearman_bnn = z_score(train1, w=SIM_Spearman_mat, neighbor_matrix= neighbor_SIM_Spearman_mat)

file_name="./output/PRED_SIM_Spearman_bnn.csv"
write.csv(PRED_SIM_Spearman_bnn,file=file_name)

SCORE_SIM_Spearman_bnn= randked_scoring(PRED_SIM_Spearman_bnn,test1)
SCORE_SIM_Spearman_bnn
```

Similarity weight - Spearman & variance weighting & SN BNN
```{r}
SIM_Spearman_mat_vw <- read.csv("./output/spearman_vm_train1.csv",header=T)
neighbor_SIM_Spearman_mat_vw <- read.csv("./output/neighbor_bnn_spearman_vw.csv",header=T)

rownames(SIM_Spearman_mat_vw) = SIM_Spearman_mat_vw[,1]
SIM_Spearman_mat_vw = SIM_Spearman_mat_vw[,-1]
rownames(neighbor_SIM_Spearman_mat_vw) = neighbor_SIM_Spearman_mat_vw[,1]
neighbor_SIM_Spearman_mat_vw = neighbor_SIM_Spearman_mat_vw[,-1]

PRED_SIM_Spearman_vw_bnn = z_score(train1, w=SIM_Spearman_mat_vw, neighbor_matrix= neighbor_SIM_Spearman_mat_vw)

file_name="./output/PRED_SIM_Spearman_vw_bnn.csv"
write.csv(PRED_SIM_Spearman_vw_bnn,file=file_name)

SCORE_SIM_Spearman_vw_bnn= randked_scoring(PRED_SIM_Spearman_vw_bnn,test1)
SCORE_SIM_Spearman_vw_bnn

```

Similarity weight - Vec Sim  & no variance weighting & SN BNN
```{r}
SIM_vec_similarity_mat <- read.csv("./output/vectorsimilarity_train1.csv",header=T)
neighbor_SIM_vec_similarity_mat <- read.csv("./output/neighbor_bnn_vecsim.csv",header=T)

rownames(SIM_vec_similarity_mat) = SIM_vec_similarity_mat[,1]
SIM_vec_similarity_mat = SIM_vec_similarity_mat[,-1]
rownames(neighbor_SIM_vec_similarity_mat) = neighbor_SIM_vec_similarity_mat[,1]
neighbor_SIM_vec_similarity_mat = neighbor_SIM_vec_similarity_mat[,-1]

PRED_SIM_vec_similarity_mat_bnn = z_score(train1, w=SIM_vec_similarity_mat, neighbor_matrix= neighbor_SIM_vec_similarity_mat)

file_name="./output/PRED_SIM_vec_similarity_mat_bnn.csv"
write.csv(PRED_SIM_vec_similarity_mat_bnn,file=file_name)

SCORE_SIM_vec_similarity_mat_bnn= randked_scoring(PRED_SIM_vec_similarity_mat_bnn,test1)
SCORE_SIM_vec_similarity_mat_bnn

```

Similarity weight - Vec Sim  & variance weighting & SN thresh
```{r}
SIM_vec_similarity_mat_vw <- read.csv("./output/vectorsimilarity_vm_train1.csv",header=T)
neighbor_SIM_vec_similarity_mat_vw <- read.csv("./output/neighbor_thresh_vecsim_vm.csv",header=T)

rownames(SIM_vec_similarity_mat_vw) = SIM_vec_similarity_mat_vw[,1]
SIM_vec_similarity_mat_vw = SIM_vec_similarity_mat_vw[,-1]
rownames(neighbor_SIM_vec_similarity_mat_vw) = neighbor_SIM_vec_similarity_mat_vw[,1]
neighbor_SIM_vec_similarity_mat_vw = neighbor_SIM_vec_similarity_mat_vw[,-1]

PRED_SIM_vec_similarity_mat_vw = z_score(train1, w=SIM_vec_similarity_mat_vw, neighbor_matrix= neighbor_SIM_vec_similarity_mat_vw)

file_name="./output/PRED_SIM_vec_similarity_mat_vw.csv"
write.csv(PRED_SIM_vec_similarity_mat_vw,file=file_name)

SCORE_SIM_vec_similarity_mat_vw= randked_scoring(PRED_SIM_vec_similarity_mat_vw,test1)
SCORE_SIM_vec_similarity_mat_vw

```



